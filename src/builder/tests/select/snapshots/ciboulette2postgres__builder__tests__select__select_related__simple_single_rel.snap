---
source: src/builder/tests/select/select_related.rs
expression: "sqlformat::format(query.as_str(), &sqlformat::QueryParams::None,\n                  sqlformat::FormatOptions::default())"

---
WITH "cte_favorite_color_data" AS (
  SELECT
    "public"."favorite_color"."id" :: TEXT AS "id",
    $1 :: TEXT AS "type",
    JSON_BUILD_OBJECT($2, "public"."favorite_color"."color") AS "data",
    NULL :: TEXT AS "related_id",
    NULL :: TEXT AS "related_type"
  FROM
    "public"."favorite_color"
    INNER JOIN "public"."peoples" ON "public"."peoples"."favorite_color" = "public"."favorite_color"."id"
  WHERE
    "public"."peoples"."id" = $3
)(
  SELECT
    "cte_favorite_color_data"."id",
    "cte_favorite_color_data"."type",
    "cte_favorite_color_data"."data",
    "cte_favorite_color_data"."related_type",
    "cte_favorite_color_data"."related_id"
  FROM
    "cte_favorite_color_data"
);
